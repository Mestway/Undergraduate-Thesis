%!TEX root=..//thesis.tex

\chapter{相关工作与未来展望}

支持程序变换的程序语言在业界已经有了较多的研究，常见的程序变换语言比如Stratego\cite{stratego}，TXL\cite{txl}，Twinning\cite{twinning}，SWIN\cite{swin-tr}等，而这些程序变换语言常常有自己的主要研究方向，接下来我们先介绍相关工作中对于程序变换语言的研究。

\paragraph{一对多映射} 很多程序语言都是设计来用于解决程序变换之中的一对多映射问题\cite{twinning,swin,oopsla05,refaster,reba,catchup}，这些语言解决的问题都体现在：规则给定原有程序的一条语句，以及该语句对应的语句序列，从而在代码中将该语句替换为对应的语句序列。一对多程序映射是程序变换中比较常见的现象，但由于其扩展性不强，在复杂的程序变换中由于上下文之间的依赖关系，单一规则的复合难以进行对这样转换模式的描述。

其中的Twinning\cite{twinning}是一种用于描述程序变换之中API变换的基本语言，其特色主要在于能够对API变换进行一对多的描述，并能够在异常抛出的问题上进行较好的条件生成，但由于缺乏安全性检查，Twinning语言在使用上需要用户来保证规则的正确性。此外SWIN\cite{swin}是基于Twinning的一种程序变换语言，该语言在Twinning的基础上增加了一个类型检查系统，保证了转换过程中的API迁移类型正确性，通过对于类型正确性的检查，确保了规则书写层面上就能避免很多的转换问题。

\paragraph{多对多映射}
同时，也有较多的程序语言是设计在多对多上的，通过对上下文关系的表述来描述多个语句之间的联系，从而限定程序转换的范围。这一类语言通常工作范围比较广泛，能够比较好的解决程序变换中的不同情况。

其中Stratego\cite{stratego}是一种通用的程序变换语言，能够解决程序变换中比较常见的变换情况，该语言通过对变换AST上的上下节点关系描述达到了比较高的描述能力，从而能够在程序变换之中进行上较好的程序变换功能。此外，SmPL\cite{spatch}是一种用来描述上下文之间匹配关系的程序语言，其特点在于能够在程序上下文中通过标识语句之间的依赖关系，通过Model Checking的方式来进行匹配，其工作能力等效于使用数据流分析上的程序匹配功能。

\medskip
除此之外，程序语言中还有一类是通过程序变换的方式来优化编译之中的代码生成问题的。例如Lacey与De Moor\cite{imperative}提出了一种在数据流框架中通过程序变换来优化代码生成，这种方法在解决代码生成中的优化问题中颇有成效，但由于其作用在数据流框架中的特点，难以拓展到源代码转换的层面。

总而言之，现有程序语言涉及面比较广，但针对API之间的多对多问题并没有做出一个比较好的抽象，从而让该问题的解决方案编程并不容易。一些新的课题正考虑使用启发式搜索的方法来提供API之间的映射\cite{catchup,semanticpatch}，将这些方法与我们的方法一起使用能够更好的提供程序变换的能力。